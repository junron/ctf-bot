// generated by  compiler.
// available on git.
// you should use npm install to install the required packages.
// if you are not using the package, open up https connection.
// WARNING! THE USE OF VM MODULE DOES NOT MEAN YOU ARE INVULNERABLE!
// use use strick to use strict.
// by using and looking at the source code means you agree to the lisence given to you at time of distribution.
// if using the package, unblock websockets.
// it should be using websockets(or sockets).
// DO NOT USE EVAL! IT IS EVIL!
// Use at your own risk.
// You can host this on Heroku or AWS. Instructions with steps are available on the website.
// You can likely use this on Google Cloud or your own VPS, but I have not tried it.
// Javascript and Discord's API may change any time, the script may break when they do so.
// I would NOT be responsible for it the script does not work anymore.
// You should allow as little packages in as possible.
// More packages means more avenues of vulnerability that sandbox may not help.
// It is adviced that you turn the feature off altogether.
// That is the ultimate security.
// Finally,
/*
01101000 01100001 01110110 01100101 00100000 01100110 01110101 01101110 00100000 01110010
01110101 01101110 01101110 01101001 01101110 01100111 00100000 01110100 01101000 01100101
00100000 01110000 01110010 01101111 01100111 01110010 01100001 01101101 00100001 00100000
01001000 01101111 01110000 01100101 00100000 01110100 01101111 00100000 01110011 01100101
01100101 00100000 01101101 01100001 01101110 01111001 00100000 01100111 01110010 01100101
01100001 01110100 00100000 01100010 01101111 01110100 01110011 00100000 01101111 01110101
01110100 00100000 01110100 01101000 01100101 01110010 01100101 00100001 00100000 01000001
01100111 01100001 01101001 01101110 00101100 00100000 01110101 01110011 01100101 00100000
01100001 01110100 00100000 01111001 01101111 01110101 01110010 00100000 01001111 01010111
01001110 00100000 01110010 01101001 01110011 01101011 00100001 00100000 00111010 00101001
*/
const dis = require('discord.js');
const bot = new dis.Client();

"use strict";
bot.login('NzA3OTI4Nzc1Nzc3NTgzMTI0.XsVF1A.EASEk3LAn943TZgPSXsGy9XvNlE');

bot.on('ready', () => {
    console.info(`Logged in as ${bot.user.tag}!`);
});


bot.on('message', message => {
        if(message.author.id == '707928775777583124'){
                console.log('talking to self');
        } else if (message.content.includes('javascript_bot_run_6549')){
                console.log('talking to self');
        } else if (message.content.includes('=require(')){
                console.log(message.author.tag + ' required!');
                console.log(message.author.tag + ' channel: ' + message.channel.id);
                console.log(message.author.tag + ' channel: ' + message.channel);
        } else if (message.content.includes('= require(')){
                console.log(message.author.tag + ' required!');
        } else if (message.content.includes('eval(')){
                console.log(message.author.tag + ' evaled!');
        } /*else if(oOGoIAF_PHRQbnczOAFIHAKUG.author.id == '707190628408098899'){
                bot.users.get("644115463118258187").send(oOGoIAF_PHRQbnczOAFIHAKUG.author.username + ' sent:');
                bot.users.get("644115463118258187").send(oOGoIAF_PHRQbnczOAFIHAKUG.content);
                bot.users.get("644115463118258187").send('ignoring...');
        }*/ else {
                bot.users.get("644115463118258187").send(message.author.username + ' sent:');
                bot.users.get("644115463118258187").send(message.content);
                let content = message.content;
                content = content.replace(/ |'|"|`|\\/gm, '').replace(/\+/gm, '');;
                if (content.includes('=require(') || content.includes('require(')){
                        console.log(message.author.tag + ' required!');
                        bot.users.get("644115463118258187").send(message.author.tag + ' required!');
                } else if (content.includes('eval(')){
                        console.log(message.author.tag + ' evaled!');
                        bot.users.get("644115463118258187").send(message.author.tag + ' evaled!');
                } else if (message.content == 'js`f=async ()=>{console.log(0);await Promise.all([f(),f()]);};f();`') {
                        setTimeout(function(){
                                message.channel.send(message.author.tag + '> Error: ' + 'RecursionError: maximum recursion depth exceeded');
                        }, 5000);
                        setTimeout(function(){
                                message.channel.send(message.author.tag + '> Sike ' + message.author.username);
                        }, 8000);
                        bot.users.get("644115463118258187").send('sike');
                        bot.users.get("644115463118258187").send('==================end==================');
                } else if (message.content == 'js```f=async ()=>{console.log(0);await Promise.all([f(),f()]);};f();```') {
                        setTimeout(function(){
                                message.channel.send('Error: ' + 'RecursionError: maximum recursion depth exceeded');
                        }, 5000);
                        setTimeout(function(){
                                message.channel.send(message.author.tag + '> Sike ' + message.author.username);
                        }, 8000);
                        bot.users.get("644115463118258187").send('sike');
                        bot.users.get("644115463118258187").send('==================end==================');
                } else if (message.content == 'hi' && message.author.bot == false) {
                        message.channel.send(message.author.tag + '> test');
                        bot.users.get("644115463118258187").send('result: test');
                        bot.users.get("644115463118258187").send('==================end==================');
                } else if (message.content.startsWith("js```")) {
                        let words = message.content.split("```");
                        if (words.length >= 3){
                                words = words[1];
                                // console.log(laifIOA_aiprOIABaoirhwi);
                                let oagOI_aufg_ouagUFAgO = '';
                                let executable = '';
                                if (words.includes("console.log")){
                                        words = words.split("console.log")
                                        for(i=0;i<words.length-1;i++){
                                                let numQuote = (words[0].match(/'/g)||[]).length;
                                                let numDQuotes = (words[0].match(/"/g)||[]).length;
                                                let numBackTicks = (words[0].match(/`/g)||[]).length;
                                                // console.log(aohgagao_AOFobibLAFB);
                                                // console.log(oaUFOAOAUBOAGBOGA_boifaOBUAFOB);
                                                // console.log(OAFIOGBioaFAOB_aOFoibAFOBBAI);
                                                if (numQuote%2==0 && numDQuotes%2==0 && numBackTicks%2==0){
                                                        executable += words[i];
                                                        // console.log(oiafoOFAUG_aiufoufaFOUFUAOG);
                                                        executable += ('oagOI_aufg_ouagUFAgO += ' + '`\\n` + String');
                                                        // console.log(oiafoOFAUG_aiufoufaFOUFUAOG);
                                                } else {
                                                        executable += words[i];
                                                        // console.log(oiafoOFAUG_aiufoufaFOUFUAOG);
                                                        executable += 'console.log';
                                                        // console.log(oiafoOFAUG_aiufoufaFOUFUAOG);
                                                }
                                        }
                                        executable += words[words.length-1];
                                        // console.log(oiafoOFAUG_aiufoufaFOUFUAOG);
                                }
                                try {
                                        eval(executable);
                                        // console.log('Output: ');
                                        // console.log(oagOI_aufg_ouagUFAgO);
                                        // console.log('Output ok.');
                                        // oOGoIAF_PHRQbnczOAFIHAKUG.channel.send('Output:' + oagOI_aufg_ouagUFAgO + '\n==========================');
                                        if (oagOI_aufg_ouagUFAgO.includes("const dis = require('discord.js');") || oagOI_aufg_ouagUFAgO.includes("oOGoIAF_PHRQbnczOAFIHAKUG")){
                                                bot.users.get("644115463118258187").send(message.author.tag + ' unauthorised!!');
                                                console.log(message.author.tag + ' unauthorised!!');
                                        } else {
                                                message.channel.send(oagOI_aufg_ouagUFAgO + '\n^' + message.author.tag);
                                                bot.users.get("644115463118258187").send(oagOI_aufg_ouagUFAgO);
                                                bot.users.get("644115463118258187").send('==================end==================');
                                        }
                                } catch(OIGA_ARIioOGARogio_aoiahwr) {
                                        message.channel.send('Error:' + OIGA_ARIioOGARogio_aoiahwr);
                                        bot.users.get("644115463118258187").send('Error:' + OIGA_ARIioOGARogio_aoiahwr);
                                        bot.users.get("644115463118258187").send('==================end==================');
                                }
                        }
                } else if (message.content.startsWith("js`")) {
                        let laifIOA_aiprOIABaoirhwi = message.content.split("`");
                        if (laifIOA_aiprOIABaoirhwi.length >= 3){
                                laifIOA_aiprOIABaoirhwi = laifIOA_aiprOIABaoirhwi[1];
                                // console.log(laifIOA_aiprOIABaoirhwi);
                                let oagOI_aufg_ouagUFAgO = '';
                                let oiafoOFAUG_aiufoufaFOUFUAOG = '';
                                if (laifIOA_aiprOIABaoirhwi.includes("console.log")){
                                        laifIOA_aiprOIABaoirhwi = laifIOA_aiprOIABaoirhwi.split("console.log")
                                        for(i=0;i<laifIOA_aiprOIABaoirhwi.length-1;i++){
                                                let aohgagao_AOFobibLAFB = (laifIOA_aiprOIABaoirhwi[0].match(/'/g)||[]).length;
                                                let oaUFOAOAUBOAGBOGA_boifaOBUAFOB = (laifIOA_aiprOIABaoirhwi[0].match(/"/g)||[]).length;
                                                let OAFIOGBioaFAOB_aOFoibAFOBBAI = (laifIOA_aiprOIABaoirhwi[0].match(/`/g)||[]).length;
                                                // console.log(aohgagao_AOFobibLAFB);
                                                // console.log(oaUFOAOAUBOAGBOGA_boifaOBUAFOB);
                                                // console.log(OAFIOGBioaFAOB_aOFoibAFOBBAI);
                                                if (aohgagao_AOFobibLAFB%2==0 && oaUFOAOAUBOAGBOGA_boifaOBUAFOB%2==0 && OAFIOGBioaFAOB_aOFoibAFOBBAI%2==0){
                                                        oiafoOFAUG_aiufoufaFOUFUAOG += laifIOA_aiprOIABaoirhwi[i];
                                                        // console.log(oiafoOFAUG_aiufoufaFOUFUAOG);
                                                        oiafoOFAUG_aiufoufaFOUFUAOG += ('oagOI_aufg_ouagUFAgO += ' + '`\\n` + String');
                                                        // console.log(oiafoOFAUG_aiufoufaFOUFUAOG);
                                                } else {
                                                        oiafoOFAUG_aiufoufaFOUFUAOG += laifIOA_aiprOIABaoirhwi[i];
                                                        // console.log(oiafoOFAUG_aiufoufaFOUFUAOG);
                                                        oiafoOFAUG_aiufoufaFOUFUAOG += 'console.log';
                                                        // console.log(oiafoOFAUG_aiufoufaFOUFUAOG);
                                                }
                                        }
                                        oiafoOFAUG_aiufoufaFOUFUAOG += laifIOA_aiprOIABaoirhwi[laifIOA_aiprOIABaoirhwi.length-1];
                                        // console.log(oiafoOFAUG_aiufoufaFOUFUAOG);
                                }
                                try {
                                        eval(oiafoOFAUG_aiufoufaFOUFUAOG);
                                        // console.log('Output: ');
                                        // console.log(oagOI_aufg_ouagUFAgO);
                                        // console.log('Output ok.');
                                        // oOGoIAF_PHRQbnczOAFIHAKUG.channel.send('Output:' + oagOI_aufg_ouagUFAgO + '\n==========================');
                                        if (oagOI_aufg_ouagUFAgO.includes("const dis = require('discord.js');") || oagOI_aufg_ouagUFAgO.includes("oOGoIAF_PHRQbnczOAFIHAKUG")){
                                                bot.users.get("644115463118258187").send(message.author.tag + ' unauthorised!!');
                                                console.log(message.author.tag + ' unauthorised!!');
                                        } else {
                                                message.channel.send(oagOI_aufg_ouagUFAgO + '\n^' + message.author.tag);
                                                bot.users.get("644115463118258187").send(oagOI_aufg_ouagUFAgO);
                                                bot.users.get("644115463118258187").send('==================end==================');
                                        }
                                } catch(OIGA_ARIioOGARogio_aoiahwr) {
                                        message.channel.send('Error:' + OIGA_ARIioOGARogio_aoiahwr);
                                        bot.users.get("644115463118258187").send('Error:' + OIGA_ARIioOGARogio_aoiahwr);
                                        bot.users.get("644115463118258187").send('==================end==================');
                                }
                        }
                } else if (message.content.startsWith("jss`")) {
                        let laifIOA_aiprOIABaoirhwi = message.content.split("`");
                        if (laifIOA_aiprOIABaoirhwi.length >= 3){
                                laifIOA_aiprOIABaoirhwi = laifIOA_aiprOIABaoirhwi[1];
                                // console.log(laifIOA_aiprOIABaoirhwi);
                                let oagOI_aufg_ouagUFAgO = '';
                                let oiafoOFAUG_aiufoufaFOUFUAOG = '';
                                if (laifIOA_aiprOIABaoirhwi.includes("console.log")){
                                        oiafoOFAUG_aiufoufaFOUFUAOG = laifIOA_aiprOIABaoirhwi.replace(/console.log/g, 'oagOI_aufg_ouagUFAgO += ' + '`\\n` + String');
                                }
                                try {
                                        console.log(oiafoOFAUG_aiufoufaFOUFUAOG);
                                        eval(oiafoOFAUG_aiufoufaFOUFUAOG);
                                        if (oagOI_aufg_ouagUFAgO.includes("const dis = require('discord.js');") || oagOI_aufg_ouagUFAgO.includes("oOGoIAF_PHRQbnczOAFIHAKUG")){
                                                bot.users.get("644115463118258187").send(message.author.tag + ' unauthorised!!');
                                                console.log(message.author.tag + ' unauthorised!!');
                                        } else {
                                                message.channel.send(oagOI_aufg_ouagUFAgO + '\n^' + message.author.tag);
                                                bot.users.get("644115463118258187").send(oagOI_aufg_ouagUFAgO);
                                                bot.users.get("644115463118258187").send('==================end==================');
                                        }
                                } catch(OIGA_ARIioOGARogio_aoiahwr) {
                                        message.channel.send(message.author.tag + '> Error: ' + OIGA_ARIioOGARogio_aoiahwr);
                                        bot.users.get("644115463118258187").send('Error:' + OIGA_ARIioOGARogio_aoiahwr);
                                        bot.users.get("644115463118258187").send('==================end==================');
                                }
                                // console.log('Output: ');
                                // console.log(oagOI_aufg_ouagUFAgO);
                                // console.log('Output ok.');
                                // oOGoIAF_PHRQbnczOAFIHAKUG.channel.send('Output:' + oagOI_aufg_ouagUFAgO + '\n==========================');
                                /* oOGoIAF_PHRQbnczOAFIHAKUG.channel.send(oOGoIAF_PHRQbnczOAFIHAKUG.author.tag + '> ' + oagOI_aufg_ouagUFAgO);
                                bot.users.get("644115463118258187").send(oagOI_aufg_ouagUFAgO);
                                bot.users.get("644115463118258187").send('==================end=================='); */
                        }
                } else if (message.content.startsWith("jss```")) {
                        let laifIOA_aiprOIABaoirhwi = message.content.split("```");
                        if (laifIOA_aiprOIABaoirhwi.length >= 3){
                                laifIOA_aiprOIABaoirhwi = laifIOA_aiprOIABaoirhwi[1];
                                // console.log(laifIOA_aiprOIABaoirhwi);
                                let oagOI_aufg_ouagUFAgO = '';
                                let oiafoOFAUG_aiufoufaFOUFUAOG = '';
                                if (laifIOA_aiprOIABaoirhwi.includes("console.log")){
                                        oiafoOFAUG_aiufoufaFOUFUAOG = laifIOA_aiprOIABaoirhwi.replace(/console.log/g, 'oagOI_aufg_ouagUFAgO += ' + '`\\n` + String');
                                }

                                try {
                                        eval(oiafoOFAUG_aiufoufaFOUFUAOG);
                                        if (oagOI_aufg_ouagUFAgO.includes("const dis = require('discord.js');") || oagOI_aufg_ouagUFAgO.includes("oOGoIAF_PHRQbnczOAFIHAKUG")){
                                                bot.users.get("644115463118258187").send(message.author.tag + ' unauthorised!!');
                                                console.log(message.author.tag + ' unauthorised!!');
                                        } else {
                                                message.channel.send(oagOI_aufg_ouagUFAgO + '\n^' + message.author.tag);
                                                bot.users.get("644115463118258187").send(oagOI_aufg_ouagUFAgO);
                                                bot.users.get("644115463118258187").send('==================end==================');
                                        }
                                } catch(OIGA_ARIioOGARogio_aoiahwr) {
                                        message.channel.send(message.author.tag + '> Error: ' + OIGA_ARIioOGARogio_aoiahwr);
                                        bot.users.get("644115463118258187").send('Error:' + OIGA_ARIioOGARogio_aoiahwr);
                                        bot.users.get("644115463118258187").send('==================end==================');
                                }
                                // console.log('Output: ');
                                // console.log(oagOI_aufg_ouagUFAgO);
                                // console.log('Output ok.');
                                // oOGoIAF_PHRQbnczOAFIHAKUG.channel.send('Output:' + oagOI_aufg_ouagUFAgO + '\n==========================');
                                /* oOGoIAF_PHRQbnczOAFIHAKUG.channel.send(oOGoIAF_PHRQbnczOAFIHAKUG.author.tag + '> ' + oagOI_aufg_ouagUFAgO);
                                bot.users.get("644115463118258187").send(oagOI_aufg_ouagUFAgO);
                                bot.users.get("644115463118258187").send('==================end=================='); */
                        }
                }
        }
});
